{{#> _base }}
{{#*inline "contents"}}


<div class="container">

  {{!-- PERSONAL DETAILS --}}
  <div class="row">
    <h1>{{user.uid}}'s Profile</h1>
    {{#unless isMyProfile}}
    <form method="POST" action="/user/{{user.uid}}/follow">
      <button class="btn btn-small waves-effect waves-light red">Follow!</button>
    </form>
    {{/unless}}
    <h2>Personal Details</h2>

    {{#if isMyProfile}}
    <!-- Modal Trigger -->
    <a class="waves-effect waves-light red darken-1 btn modal-trigger" href="#modal1">Edit <i
        class="small material-icons text-darken-1">edit</i></a>

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
      <form method="POST" action="/user/{{user.uid}}" class="col s12" id="detailsForm">
        <div class="modal-content">
          <h4>Edit Personal Details</h4>
          <div class="row">

            <div class="row">
              <div class="col s12">
                <div class="input-field">
                  <input value="{{user.email}}" name="email" id="email" type="email" class="validate">
                  <label for="email">Email</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col s12">
                <div class="input-field">
                  <input value="{{user.mobile}}" name="mobile" id="mobile" type="text" class="validate">
                  <label class="active" for="mobile">Mobile</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col s12">
                <div class="input-field">
                  <input value="{{user.address}}" name="address" id="address" type="text" class="validate">
                  <label for="address">Address</label>
                </div>
              </div>
            </div>

          </div>
        </div>
        <div class="modal-footer">
          <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
          <button type="submit" form="detailsForm" class="modal-close waves-effect waves-green btn-flat">Save
            Changes</button>
        </div>
      </form>
    </div>
    {{/if}}

    <ul>
      <li>mobile - {{user.mobile}}</li>
      <li>email - {{user.email}}</li>
      <li>address - {{user.address}}</li>
    </ul>
  </div>

  {{#if isMyProfile}}
  {{!-- ITEMS --}}
  <div class="row">
    <h2>Items</h2>


    <!-- Modal Trigger -->
    <a class="waves-effect waves-light red darken-1 btn modal-trigger" href="#modal2">Add <i
        class="small material-icons text-darken-1">add</i></a>

    <!-- Modal Structure -->
    <div id="modal2" class="modal">
      <form method="POST" action="/item" class="col s12" id="newItemForm">
        <div class="modal-content">
          <h4>Add New Item</h4>
          <div class="row">

            <div class="row">
              <div class="col s12">
                <div class="input-field">
                  <input name="itemName" id="itemName" type="text" class="validate">
                  <label for="itemName">Item Name</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col s12">
                <div class="input-field">
                  <input name="category" id="category" type="text" class="validate">
                  <label for="category">Category</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col s12">
                <div class="input-field">
                  <input name="status" id="status" type="text" class="validate">
                  <label for="status">Status</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col s12">
                <div class="input-field">
                  <input name="photo" id="photo" type="text" class="validate">
                  <label for="photo">Photo</label>
                </div>
              </div>
            </div>

            <div class="row">
              <form class="col s12">
                <div class="row">
                  <div class="input-field col s12">
                    <textarea name="desc" id="desc" class="materialize-textarea"></textarea>
                    <label for="desc">Description</label>
                  </div>
                </div>
              </form>
            </div>

          </div>
        </div>
        <div class="modal-footer">
          <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
          <button type="submit" form="newItemForm" class="modal-close waves-effect waves-green btn-flat">Add
            Item</button>
        </div>
      </form>
    </div>
    {{/if}}
  </div>

  <div class="row">
    {{#each items}}
    <a href="/item/{{this.iid}}">
      <div class="col s12 m6 xl4">
        <div class="card waves-effect waves-block">
          <div class="card-image">
            <div class="img-fit listing-item-image"
              style="background-image: url('https://media.karousell.com/media/photos/products/2018/10/07/buy_1538918236_d4243b29.jpg');">
            </div>
            <form method="POST" action="/item/{{this.iid}}/delete">
              <button class="btn-floating btn-large halfway-fab waves-effect waves-red white"><i
                  class="material-icons red-text text-darken-1">delete</i></button>
            </form>
          </div>
          <div class="card-content black-text">
            <span class="card-title mb-0"><b>{{this.item_name}}</b></span>
            <div class="flex-display flex-align-center">
              <div class="trans-2">{{this.category}}</div>
              <div class="flex-grow"></div>
              <div class="flex-show font-larger">{{this.status}}</div>
            </div>
          </div>
        </div>
      </div>
    </a>

    {{/each}}
  </div>

  {{!-- LISTING --}}
  <div class="row">
    <h2>Listing</h2>
    {{#each listings}}
    <a href="/item/{{this.item_iid}}">
      <div class="col s12 m6 xl4">
        <div class="card waves-effect waves-block">
          <div class="card-image">
            <div class="img-fit listing-item-image"
              style="background-image: url('https://media.karousell.com/media/photos/products/2018/10/07/buy_1538918236_d4243b29.jpg');">
            </div>
          </div>
          <div class="card-content black-text">
            <span class="card-title mb-0"><b>{{this.title}}</b></span>
            <div class="flex-display flex-align-center">
              <div class="trans-2">{{this.category}}</div>
              <div class="flex-grow"></div>
              <div class="flex-show font-larger">{{this.status}}</div>
            </div>
          </div>
        </div>
      </div>
    </a>

    {{/each}}
  </div>


  {{!-- LIKES --}}
  <div class="row">
    <h2>Likes</h2>
    {{#each likes}}
    <a href="/item/{{this.iid}}">
      <div class="col s12 m6 xl4">
        <div class="card waves-effect waves-block">
          <div class="card-image">
            <div class="img-fit listing-item-image"
              style="background-image: url('https://media.karousell.com/media/photos/products/2018/10/07/buy_1538918236_d4243b29.jpg');">
            </div>
            <form method="POST" action="/item/{{this.iid}}/like">
              <button type="submit" class="btn-floating btn-large halfway-fab waves-effect waves-red white"><i
                  class="material-icons red-text text-darken-1">favorite</i></button>
            </form>
          </div>
          <div class="card-content black-text">
            <span class="card-title mb-0"><b>{{this.item_name}}</b></span>
            <div class="flex-display flex-align-center">
              <div class="trans-2">{{this.category}}</div>
              <div class="flex-grow"></div>
              <div class="flex-show font-larger">{{this.status}}</div>
            </div>
          </div>
        </div>
      </div>
    </a>

    {{/each}}
  </div>

  {{!-- FOLLOWING --}}
  <h2>Following</h2>
  <ul>
    {{#each following}}
    <li><a href="/user/{{this.followee_uid}}">{{this.followee_uid}}</a></li>
    {{/each}}
  </ul>

  {{!-- FOLLOWERS --}}
  <h2>Followers</h2>
  <ul>
    {{#each followers}}
    <li><a href="/user/{{this.follower_uid}}">{{this.follower_uid}}</a></li>
    {{/each}}
  </ul>
</div>
{{/inline}}
{{/_base}}