{{#> _base }}
{{#*inline "contents"}}
<div class="container">
  <div class="row">
    <h1>Add/Edit Review</h1>


    {{#each sections}}

    <h4>{{this.sname}}</h4>
    <div class="row">
      <!-- Modal Trigger -->
      <a class="waves-effect waves-light red darken-1 btn modal-trigger mb-1" href="#modal{{this.sname}}">Edit
        Section</a>


      <form method="POST" action="/item/{{../item}}/review/delete/{{this.sname}}">
        <button class="btn btn-small waves-effect waves-light red">Delete Section</button>
      </form>

      <!-- Modal Structure -->
      <div id="modal{{this.sname}}" class="modal">
        <form method="POST" action="/item/{{../item}}/review/save" class="col s12" id="sectionForm">
          <div class="modal-content">
            <h4>Edit Section</h4>
            <div class="row">

              <div class="row">
                <div class="col s12">
                  <div class="input-field">
                    <input value={{this.sname}} name="sname" id="sname" type="text" class="validate">
                    <label for="sname">Section Name</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12">
                  <textarea name="content" id="content" class="materialize-textarea"
                    data-length="120">{{this.content}}</textarea>
                  <label for="content">Content</label>
                </div>
              </div>

              {{!-- HIDDEN FIELD TO GET PREVIOUS SNAME --}}
              <div class="row hide">
                <div class="col s12">
                  <div class="input-field">
                    <input value={{this.sname}} name="psname" id="psname" type="text" class="validate">
                    <label for="psname"></label>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
            <button type="submit" form="sectionForm" class="modal-close waves-effect waves-green btn-flat">Save
              Changes</button>
          </div>
        </form>
      </div>

      <p>{{this.content}}</p>

      {{/each}}

      <h4>New Section</h4>
      <div class="row">
        <!-- Modal Trigger -->
        <a class="waves-effect waves-light red darken-1 btn modal-trigger mb-1" href="#modal2">Add New Section</a>

        <!-- Modal Structure -->
        <div id="modal2" class="modal">
          <form method="POST" action="/item/{{item}}/review/save" class="col s12" id="newSectionForm">
            <div class="modal-content">
              <h4>Add New Section</h4>
              <div class="row">

                <div class="row">
                  <div class="col s12">
                    <div class="input-field">
                      <input name="sname" id="sname" type="text" class="validate">
                      <label for="sname">Section Name</label>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="input-field col s12">
                    <textarea name="content" id="content" class="materialize-textarea" data-length="120"></textarea>
                    <label for="content">Content</label>
                  </div>
                </div>

                {{!-- HIDDEN FIELD TO GET PREVIOUS SNAME --}}
                <div class="row hide">
                  <div class="col s12">
                    <div class="input-field">
                      <input name="psname" id="psname" type="text" class="validate">
                      <label for="psname"></label>
                    </div>
                  </div>
                </div>

              </div>
            </div>
            <div class="modal-footer">
              <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
              <button type="submit" form="newSectionForm" class="modal-close waves-effect waves-green btn-flat">Save
                Changes</button>
            </div>
          </form>
        </div>

      </div>

    </div>


    {{/inline}}
    {{/_base}}